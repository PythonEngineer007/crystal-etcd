<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.34.0">
<meta name="crystal_docs.project_version" content="HEAD">
<meta name="crystal_docs.project_name" content="etcd">


<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>

  <meta id="repository-name" content="etcd">
  <title>etcd HEAD</title>
  <script type="text/javascript">
  CrystalDocs.base_path = "";
  </script>
</head>
<body>

<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="index.html">
          etcd
        </a>
      </h1>

      <span class="project-version">
        HEAD
      </span>
    </div>
  </div>

  <div class="search-results" class="hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent " data-id="etcd/Etcd" data-name="etcd">
      <a href="Etcd.html">Etcd</a>
      
        <ul>
  
  <li class=" " data-id="etcd/Etcd/Api" data-name="etcd::api">
      <a href="Etcd/Api.html">Api</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/ApiError" data-name="etcd::apierror">
      <a href="Etcd/ApiError.html">ApiError</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Auth" data-name="etcd::auth">
      <a href="Etcd/Auth.html">Auth</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Client" data-name="etcd::client">
      <a href="Etcd/Client.html">Client</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Cluster" data-name="etcd::cluster">
      <a href="Etcd/Cluster.html">Cluster</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Error" data-name="etcd::error">
      <a href="Etcd/Error.html">Error</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Kv" data-name="etcd::kv">
      <a href="Etcd/Kv.html">Kv</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Lease" data-name="etcd::lease">
      <a href="Etcd/Lease.html">Lease</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Maintenance" data-name="etcd::maintenance">
      <a href="Etcd/Maintenance.html">Maintenance</a>
      
    </li>
  
  <li class="parent " data-id="etcd/Etcd/Model" data-name="etcd::model">
      <a href="Etcd/Model.html">Model</a>
      
        <ul>
  
  <li class=" " data-id="etcd/Etcd/Model/Base64Converter" data-name="etcd::model::base64converter">
      <a href="Etcd/Model/Base64Converter.html">Base64Converter</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/DeleteResponse" data-name="etcd::model::deleteresponse">
      <a href="Etcd/Model/DeleteResponse.html">DeleteResponse</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/Header" data-name="etcd::model::header">
      <a href="Etcd/Model/Header.html">Header</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/Kv" data-name="etcd::model::kv">
      <a href="Etcd/Model/Kv.html">Kv</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/PutResponse" data-name="etcd::model::putresponse">
      <a href="Etcd/Model/PutResponse.html">PutResponse</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/RangeResponse" data-name="etcd::model::rangeresponse">
      <a href="Etcd/Model/RangeResponse.html">RangeResponse</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/Status" data-name="etcd::model::status">
      <a href="Etcd/Model/Status.html">Status</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/StringTypeConverter" data-name="etcd::model::stringtypeconverter(t)">
      <a href="Etcd/Model/StringTypeConverter.html">StringTypeConverter</a>
      
    </li>
  
  <li class="parent " data-id="etcd/Etcd/Model/TxnResponse" data-name="etcd::model::txnresponse">
      <a href="Etcd/Model/TxnResponse.html">TxnResponse</a>
      
        <ul>
  
  <li class=" " data-id="etcd/Etcd/Model/TxnResponse/Response" data-name="etcd::model::txnresponse::response">
      <a href="Etcd/Model/TxnResponse/Response.html">Response</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/WatchError" data-name="etcd::model::watcherror">
      <a href="Etcd/Model/WatchError.html">WatchError</a>
      
    </li>
  
  <li class="parent " data-id="etcd/Etcd/Model/WatchEvent" data-name="etcd::model::watchevent">
      <a href="Etcd/Model/WatchEvent.html">WatchEvent</a>
      
        <ul>
  
  <li class=" " data-id="etcd/Etcd/Model/WatchEvent/Type" data-name="etcd::model::watchevent::type">
      <a href="Etcd/Model/WatchEvent/Type.html">Type</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/WatchResponse" data-name="etcd::model::watchresponse">
      <a href="Etcd/Model/WatchResponse.html">WatchResponse</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/WatchResult" data-name="etcd::model::watchresult">
      <a href="Etcd/Model/WatchResult.html">WatchResult</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Utils" data-name="etcd::utils">
      <a href="Etcd/Utils.html">Utils</a>
      
    </li>
  
  <li class="parent " data-id="etcd/Etcd/Watch" data-name="etcd::watch">
      <a href="Etcd/Watch.html">Watch</a>
      
        <ul>
  
  <li class=" " data-id="etcd/Etcd/Watch/Filter" data-name="etcd::watch::filter">
      <a href="Etcd/Watch/Filter.html">Filter</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Watch/Watcher" data-name="etcd::watch::watcher">
      <a href="Etcd/Watch/Watcher.html">Watcher</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="etcd/Etcd/WatchError" data-name="etcd::watcherror">
      <a href="Etcd/WatchError.html">WatchError</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1><a id="crystal-etcd" class="anchor" href="#crystal-etcd">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>crystal-etcd</h1>

<p><a href="https://travis-ci.org/aca-labs/crystal-etcd" target="_blank"><img src="https://travis-ci.org/aca-labs/crystal-etcd.svg?branch=master" alt="Build Status"/></a>
<a href="https://aca-labs.github.io/crystal-etcd/" target="_blank"><img src="https://img.shields.io/badge/docs-available-brightgreen.svg" alt="Docs"/></a></p>

<p><a href="https://www.etcd.io/" target="_blank">etcd</a> client for <a href="https://crystal-lang.org/" target="_blank">crystal lang</a> implemented as a thin wrapper over etcd's <a href="https://github.com/etcd-io/etcd/blob/master/Documentation/dev-guide/api_grpc_gateway.md" target="_blank">gRPC-HTTP gateway</a>.</p>

<p>This client was developed against etcd v3.3, to use a higher version, set <code>api_version</code> arg to an appropriate version prefix when instantiating the client.</p>

<h2><a id="installation" class="anchor" href="#installation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Installation</h2>

<ol><li>Add the dependency to your <code>shard.yml</code>:</li></ol>

<p><code></code>`yaml
   dependencies:</p>

<pre><code> etcd:
   github: aca<span class="o">-</span>labs<span class="s">/crystal-etcd</span></code></pre>

<p><code></code>`</p>

<ol><li>Run <code>shards install</code></li></ol>

<h2><a id="usage" class="anchor" href="#usage">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Usage</h2>

<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;etcd&quot;</span>

<span class="c"># Initialising a client from ETCD_HOST and ETCD_PORT</span>
client <span class="o">=</span> <span class="t">Etcd</span>.from_env

<span class="c"># Add a key/value to etcd</span>
client.kv.put(<span class="s">&quot;/service/hello&quot;</span>, <span class="s">&quot;world&quot;</span>)
<span class="c"># Grab a key/value from etcd</span>
client.range(<span class="s">&quot;/service/hello&quot;</span>).kvs.try(<span class="o">&amp;</span>.first?) <span class="c">#=&gt; #&lt;Etcd::Model::KV @key=&quot;/service/hello&quot; @value=&quot;world&quot; @create_revision=nil  @mod_revision=nil @version=nil @lease=nil&gt;</span></code></pre>

<h2><a id="todo" class="anchor" href="#todo">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>TODO</h2>

<ul><li>Auth.</li><li>Multi-node.</li></ul>

<h3><a id="auth" class="anchor" href="#auth">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Auth</h3>

<ul><li>[ ] authenticate</li><li>[ ] disable</li><li>[ ] enable</li><li>[ ] role/add</li><li>[ ] role/delete</li><li>[ ] role/get</li><li>[ ] role/grant</li><li>[ ] role/list</li><li>[ ] role/revoke</li><li>[ ] user/add</li><li>[ ] user/changepw</li><li>[ ] user/delete</li><li>[ ] user/get</li><li>[ ] user/grant</li><li>[ ] user/list</li><li>[ ] user/revoke</li></ul>

<h3><a id="cluster" class="anchor" href="#cluster">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Cluster</h3>

<ul><li>[ ] member/add</li><li>[ ] member/list</li><li>[ ] member/promote</li><li>[ ] member/remove</li><li>[ ] member/update</li></ul>

<h3><a id="kv" class="anchor" href="#kv">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Kv</h3>

<ul><li>[x] put</li><li>[x] range</li><li>[x] deleterange</li><li>[ ] compaction</li><li>[ ] txn</li></ul>

<h3><a id="lease" class="anchor" href="#lease">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Lease</h3>

<ul><li>[x] grant</li><li>[x] keepalive</li><li>[x] leases</li><li>[x] revoke</li><li>[x] timetolive</li></ul>

<h3><a id="maintenance" class="anchor" href="#maintenance">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Maintenance</h3>

<ul><li>[ ] alarm</li><li>[ ] defragment</li><li>[ ] hash</li><li>[ ] snapshot</li><li>[x] status</li><li>[ ] transfer-leadership</li></ul>

<h3><a id="watch" class="anchor" href="#watch">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Watch</h3>

<ul><li>[x] watch</li></ul>

<h2><a id="contributing" class="anchor" href="#contributing">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributing</h2>

<ol><li><a href="https://github.com/aca-labs/crystal-etcd/fork" target="_blank">Fork it</a></li><li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li><li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li><li>Push to the branch (<code>git push origin my-new-feature</code>)</li><li>Create a new Pull Request</li></ol>

<h2><a id="see-also" class="anchor" href="#see-also">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>See Also</h2>

<ul><li><a href="https://github.com/aca-labs/crystal-docker" target="_blank">crystal-docker</a></li></ul>

<h2><a id="contributors" class="anchor" href="#contributors">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributors</h2>

<ul><li><a href="https://github.com/caspiano" target="_blank">Caspian Baska</a> - creator and maintainer</li></ul>
</div>
</body>
</html>
