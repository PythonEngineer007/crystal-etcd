<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.34.0">
<meta name="crystal_docs.project_version" content="HEAD">
<meta name="crystal_docs.project_name" content="etcd">


<link href="../css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../js/doc.js"></script>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>

  <meta id="repository-name" content="etcd">
  <title>Etcd::Kv - etcd HEAD</title>
  <script type="text/javascript">
    CrystalDocs.base_path = "../";
  </script>
</head>
<body>

<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="../index.html">
          etcd
        </a>
      </h1>

      <span class="project-version">
        HEAD
      </span>
    </div>
  </div>

  <div class="search-results" class="hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent open current" data-id="etcd/Etcd" data-name="etcd">
      <a href="../Etcd.html">Etcd</a>
      
        <ul>
  
  <li class=" " data-id="etcd/Etcd/Api" data-name="etcd::api">
      <a href="../Etcd/Api.html">Api</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/ApiError" data-name="etcd::apierror">
      <a href="../Etcd/ApiError.html">ApiError</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Auth" data-name="etcd::auth">
      <a href="../Etcd/Auth.html">Auth</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Client" data-name="etcd::client">
      <a href="../Etcd/Client.html">Client</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Cluster" data-name="etcd::cluster">
      <a href="../Etcd/Cluster.html">Cluster</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Error" data-name="etcd::error">
      <a href="../Etcd/Error.html">Error</a>
      
    </li>
  
  <li class=" current" data-id="etcd/Etcd/Kv" data-name="etcd::kv">
      <a href="../Etcd/Kv.html">Kv</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Lease" data-name="etcd::lease">
      <a href="../Etcd/Lease.html">Lease</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Maintenance" data-name="etcd::maintenance">
      <a href="../Etcd/Maintenance.html">Maintenance</a>
      
    </li>
  
  <li class="parent " data-id="etcd/Etcd/Model" data-name="etcd::model">
      <a href="../Etcd/Model.html">Model</a>
      
        <ul>
  
  <li class=" " data-id="etcd/Etcd/Model/Base64Converter" data-name="etcd::model::base64converter">
      <a href="../Etcd/Model/Base64Converter.html">Base64Converter</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/DeleteResponse" data-name="etcd::model::deleteresponse">
      <a href="../Etcd/Model/DeleteResponse.html">DeleteResponse</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/Header" data-name="etcd::model::header">
      <a href="../Etcd/Model/Header.html">Header</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/Kv" data-name="etcd::model::kv">
      <a href="../Etcd/Model/Kv.html">Kv</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/PutResponse" data-name="etcd::model::putresponse">
      <a href="../Etcd/Model/PutResponse.html">PutResponse</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/RangeResponse" data-name="etcd::model::rangeresponse">
      <a href="../Etcd/Model/RangeResponse.html">RangeResponse</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/Status" data-name="etcd::model::status">
      <a href="../Etcd/Model/Status.html">Status</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/StringTypeConverter" data-name="etcd::model::stringtypeconverter(t)">
      <a href="../Etcd/Model/StringTypeConverter.html">StringTypeConverter</a>
      
    </li>
  
  <li class="parent " data-id="etcd/Etcd/Model/TxnResponse" data-name="etcd::model::txnresponse">
      <a href="../Etcd/Model/TxnResponse.html">TxnResponse</a>
      
        <ul>
  
  <li class=" " data-id="etcd/Etcd/Model/TxnResponse/Response" data-name="etcd::model::txnresponse::response">
      <a href="../Etcd/Model/TxnResponse/Response.html">Response</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/WatchError" data-name="etcd::model::watcherror">
      <a href="../Etcd/Model/WatchError.html">WatchError</a>
      
    </li>
  
  <li class="parent " data-id="etcd/Etcd/Model/WatchEvent" data-name="etcd::model::watchevent">
      <a href="../Etcd/Model/WatchEvent.html">WatchEvent</a>
      
        <ul>
  
  <li class=" " data-id="etcd/Etcd/Model/WatchEvent/Type" data-name="etcd::model::watchevent::type">
      <a href="../Etcd/Model/WatchEvent/Type.html">Type</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/WatchResponse" data-name="etcd::model::watchresponse">
      <a href="../Etcd/Model/WatchResponse.html">WatchResponse</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Model/WatchResult" data-name="etcd::model::watchresult">
      <a href="../Etcd/Model/WatchResult.html">WatchResult</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Utils" data-name="etcd::utils">
      <a href="../Etcd/Utils.html">Utils</a>
      
    </li>
  
  <li class="parent " data-id="etcd/Etcd/Watch" data-name="etcd::watch">
      <a href="../Etcd/Watch.html">Watch</a>
      
        <ul>
  
  <li class=" " data-id="etcd/Etcd/Watch/Filter" data-name="etcd::watch::filter">
      <a href="../Etcd/Watch/Filter.html">Filter</a>
      
    </li>
  
  <li class=" " data-id="etcd/Etcd/Watch/Watcher" data-name="etcd::watch::watcher">
      <a href="../Etcd/Watch/Watcher.html">Watcher</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="etcd/Etcd/WatchError" data-name="etcd::watcherror">
      <a href="../Etcd/WatchError.html">WatchError</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1 class="type-name">

  <span class="kind">class</span> Etcd::Kv

</h1>


  <ul class="superclass-hierarchy"><li class="superclass"><a href="../Etcd/Kv.html">Etcd::Kv</a></li><li class="superclass">Reference</li><li class="superclass">Object</li></ul>








  <h2>
    <a id="included-modules" class="anchor" href="#included-modules">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Included Modules
  </h2>
  <ul class="other-types-list">
    
      <li class="other-type"><a href="../Etcd/Utils.html">Etcd::Utils</a></li>
    
  </ul>










  <h2>
    <a id="defined-in" class="anchor" href="#defined-in">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Defined in:
  </h2>
  
    
      <a href="https://github.com/place-labs/crystal-etcd/blob/e1f8031dac02bf811a6fce622ccbb64bd4539a02/src/etcd/kv.cr#L5" target="_blank">
        etcd/kv.cr
      </a>
    
    <br/>
  



  
    <h2>
      <a id="constant-summary" class="anchor" href="#constant-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
      Constant Summary
    </h2>
  
  <dl>
    
      <dt class="entry-const" id="Log">
        <strong>Log</strong> = <code><span class="t">::</span><span class="t">Log</span>.<span class="k">for</span>(<span class="k">self</span>)</code>
      </dt>
      
    
  </dl>



  <h2>
    <a id="constructors" class="anchor" href="#constructors">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Constructors
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#new(client=Etcd::Client.new)-class-method" class="signature"><strong>.new</strong>(client = <span class="t">Etcd</span><span class="t">::</span><span class="t">Client</span>.<span class="k">new</span>)</a>
        
      </li>
    
  </ul>





  <h2>
    <a id="instance-method-summary" class="anchor" href="#instance-method-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Instance Method Summary
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#compare_and_swap(key,value,previous_value,lease_id:Int64=0_i64):Bool-instance-method" class="signature"><strong>#compare_and_swap</strong>(key, value, previous_value, lease_id : Int64 = <span class="n">0_i64</span>) : Bool</a>
        
          <div class="summary"><p>Sets a <code>key</code> if the given <code>previous_value</code> matches the existing value for <code>key</code></p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#delete(key,range_end:String?=nil,base64_keys:Bool=true)-instance-method" class="signature"><strong>#delete</strong>(key, range_end : String? = <span class="n">nil</span>, base64_keys : Bool = <span class="n">true</span>)</a>
        
          <div class="summary"><p>Deletes key or range of keys</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#delete_prefix(prefix)-instance-method" class="signature"><strong>#delete_prefix</strong>(prefix)</a>
        
          <div class="summary"><p>Deletes an entire keyspace prefix</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#get(key):String?-instance-method" class="signature"><strong>#get</strong>(key) : String?</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#put(key:String,value,lease:Int64=0_i64,prev_kv:Bool?=nil,ignore_value:Bool?=nil,ignore_lease:Bool?=nil)-instance-method" class="signature"><strong>#put</strong>(key : String, value, lease : Int64 = <span class="n">0_i64</span>, prev_kv : Bool? = <span class="n">nil</span>, ignore_value : Bool? = <span class="n">nil</span>, ignore_lease : Bool? = <span class="n">nil</span>)</a>
        
          <div class="summary"><p>Sets a key and value in etcd.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#put_not_exists(key:String,value,lease:Int64=0_i64):Bool-instance-method" class="signature"><strong>#put_not_exists</strong>(key : String, value, lease : Int64 = <span class="n">0_i64</span>) : Bool</a>
        
          <div class="summary"><p>Sets a key if the key is not already present.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#range(key,range_end:String?=nil,base64_keys:Bool=true)-instance-method" class="signature"><strong>#range</strong>(key, range_end : String? = <span class="n">nil</span>, base64_keys : Bool = <span class="n">true</span>)</a>
        
          <div class="summary"><p>Queries a range of keys</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#range_greater_than_or_equal(key)-instance-method" class="signature"><strong>#range_greater_than_or_equal</strong>(key)</a>
        
          <div class="summary"><p>Query all keys >= key</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#range_prefix(prefix)-instance-method" class="signature"><strong>#range_prefix</strong>(prefix)</a>
        
          <div class="summary"><p>Query keys beneath a prefix</p></div>
        
      </li>
    
  </ul>





<div class="methods-inherited">
  
    

  <h3>Instance methods inherited from module <code><a href="../Etcd/Utils.html">Etcd::Utils</a></code></h3>
  
  
    <a href="../Etcd/Utils.html#prefix_range_end(prefix)-instance-method" class="tooltip">
      <span>prefix_range_end(prefix)</span>
    prefix_range_end</a>
    
  


    


    


  
    


    


    


  
    


    


    


  
</div>


  <h2>
    <a id="constructor-detail" class="anchor" href="#constructor-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Constructor Detail
  </h2>
  
    <div class="entry-detail" id="new(client=Etcd::Client.new)-class-method">
      <div class="signature">
        
        def self.<strong>new</strong>(client = <span class="t">Etcd</span><span class="t">::</span><span class="t">Client</span>.<span class="k">new</span>)

        <a class="method-permalink" href="#new(client=Etcd::Client.new)-class-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/place-labs/crystal-etcd/blob/e1f8031dac02bf811a6fce622ccbb64bd4539a02/src/etcd/kv.cr#L11" target="_blank">View source</a>]
        
      </div>
    </div>
  





  <h2>
    <a id="instance-method-detail" class="anchor" href="#instance-method-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Instance Method Detail
  </h2>
  
    <div class="entry-detail" id="compare_and_swap(key,value,previous_value,lease_id:Int64=0_i64):Bool-instance-method">
      <div class="signature">
        
        def <strong>compare_and_swap</strong>(key, value, previous_value, lease_id : Int64 = <span class="n">0_i64</span>) : Bool

        <a class="method-permalink" href="#compare_and_swap(key,value,previous_value,lease_id:Int64=0_i64):Bool-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Sets a <code>key</code> if the given <code>previous_value</code> matches the existing value for <code>key</code></p>

<p>Wrapper over the etcd transaction API.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/place-labs/crystal-etcd/blob/e1f8031dac02bf811a6fce622ccbb64bd4539a02/src/etcd/kv.cr#L132" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="delete(key,range_end:String?=nil,base64_keys:Bool=true)-instance-method">
      <div class="signature">
        
        def <strong>delete</strong>(key, range_end : String? = <span class="n">nil</span>, base64_keys : Bool = <span class="n">true</span>)

        <a class="method-permalink" href="#delete(key,range_end:String?=nil,base64_keys:Bool=true)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Deletes key or range of keys</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/place-labs/crystal-etcd/blob/e1f8031dac02bf811a6fce622ccbb64bd4539a02/src/etcd/kv.cr#L45" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="delete_prefix(prefix)-instance-method">
      <div class="signature">
        
        def <strong>delete_prefix</strong>(prefix)

        <a class="method-permalink" href="#delete_prefix(prefix)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Deletes an entire keyspace prefix</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/place-labs/crystal-etcd/blob/e1f8031dac02bf811a6fce622ccbb64bd4539a02/src/etcd/kv.cr#L62" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="get(key):String?-instance-method">
      <div class="signature">
        
        def <strong>get</strong>(key) : String?

        <a class="method-permalink" href="#get(key):String?-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/place-labs/crystal-etcd/blob/e1f8031dac02bf811a6fce622ccbb64bd4539a02/src/etcd/kv.cr#L155" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="put(key:String,value,lease:Int64=0_i64,prev_kv:Bool?=nil,ignore_value:Bool?=nil,ignore_lease:Bool?=nil)-instance-method">
      <div class="signature">
        
        def <strong>put</strong>(key : String, value, lease : Int64 = <span class="n">0_i64</span>, prev_kv : Bool? = <span class="n">nil</span>, ignore_value : Bool? = <span class="n">nil</span>, ignore_lease : Bool? = <span class="n">nil</span>)

        <a class="method-permalink" href="#put(key:String,value,lease:Int64=0_i64,prev_kv:Bool?=nil,ignore_value:Bool?=nil,ignore_lease:Bool?=nil)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Sets a key and value in etcd.
key             key is the string that will be base64 encoded and associated with value in the kv store                          String
value           value is the string that will be base64 encoded and associated with key in the kv store                          String
opts
  lease         lease is the lease ID to associate with the key in the key-value store. A lease value of 0 indicates no lease.   Int64
  prev_kv       If prev_kv is set, etcd gets the previous key-value pair before changing it.</p>

<pre><code>            <span class="t">The</span> previous key<span class="o">-</span>value pair will be returned <span class="k">in</span> the put response.                                                 <span class="t">Bool</span></code></pre>

<p>ignore_value  If ignore_value is set, etcd updates the key using its current value. Returns an error if the key does not exist  Bool
  ignore_lease  If ignore_lease is set, etcd updates the key using its current lease. Returns an error if the key does not exist  Bool</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/place-labs/crystal-etcd/blob/e1f8031dac02bf811a6fce622ccbb64bd4539a02/src/etcd/kv.cr#L23" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="put_not_exists(key:String,value,lease:Int64=0_i64):Bool-instance-method">
      <div class="signature">
        
        def <strong>put_not_exists</strong>(key : String, value, lease : Int64 = <span class="n">0_i64</span>) : Bool

        <a class="method-permalink" href="#put_not_exists(key:String,value,lease:Int64=0_i64):Bool-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Sets a key if the key is not already present.</p>

<p>Wrapper over the etcd transaction API.</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/place-labs/crystal-etcd/blob/e1f8031dac02bf811a6fce622ccbb64bd4539a02/src/etcd/kv.cr#L105" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="range(key,range_end:String?=nil,base64_keys:Bool=true)-instance-method">
      <div class="signature">
        
        def <strong>range</strong>(key, range_end : String? = <span class="n">nil</span>, base64_keys : Bool = <span class="n">true</span>)

        <a class="method-permalink" href="#range(key,range_end:String?=nil,base64_keys:Bool=true)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Queries a range of keys</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/place-labs/crystal-etcd/blob/e1f8031dac02bf811a6fce622ccbb64bd4539a02/src/etcd/kv.cr#L69" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="range_greater_than_or_equal(key)-instance-method">
      <div class="signature">
        
        def <strong>range_greater_than_or_equal</strong>(key)

        <a class="method-permalink" href="#range_greater_than_or_equal(key)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Query all keys >= key</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/place-labs/crystal-etcd/blob/e1f8031dac02bf811a6fce622ccbb64bd4539a02/src/etcd/kv.cr#L93" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="range_prefix(prefix)-instance-method">
      <div class="signature">
        
        def <strong>range_prefix</strong>(prefix)

        <a class="method-permalink" href="#range_prefix(prefix)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Query keys beneath a prefix</p>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/place-labs/crystal-etcd/blob/e1f8031dac02bf811a6fce622ccbb64bd4539a02/src/etcd/kv.cr#L86" target="_blank">View source</a>]
        
      </div>
    </div>
  




</div>

</body>
</html>
